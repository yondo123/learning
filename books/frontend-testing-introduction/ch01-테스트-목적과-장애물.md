# CH01-테스트 목적과 장애물

## 테스트 목적과 장애물

### 테스트 방법

**1. 함수 단위 테스트**
테스트 코드를 통해 신뢰할 수 있는 함수를 만드는 것이 목적이다.
함수 단위로 발생할 수 있는 문제를 빠르게 발견할 수 있다.

**2.UI 컴포넌트와 단위 테스트**
함수로 만든 UI 컴포넌트일수록 단위 테스트가 쉽다.
최근에는 테스트 코드를 활용해 웹 접근성 품질까지 검증이 가능하다.

**3. UI 컴포넌트와 통합 테스트**
UI 컴포넌트는 단순히 데이터를 화면에 그리는 일 외에도 비동기 처리를 통한 입력 이벤트나, 외부로부터 비동기 응답을 받아 화면을 갱신하는 작업도 진행한다.
Mock 서버를 활용해 통합 테스트를 진행할 수 있다.

**4. UI 컴포넌트와 시각적 회귀 테스트**
CSS가 적용된 출력 결과를 검증하려면 시각적 회귀 테스트가 필요하다.

**5. E2E 테스트**
Headless Browser를 활용해 실제 애플리케이션 환경에 가깝게 테스트를 진행할 수 있다.

### 테스트 라이브러리 종류

**1. Jest**
명령줄 인터페이스(cli) 기반 테스트 프레임워크 및 테스트 실행기
**2. Playwright**
Headless Browser를 포함한 테스트 프레임워크 및 테스트 실행기
**3. Storybook**
UI 컴포넌트 탐색기

### 테스트를 작성해야 하는 이유?

**1. 신뢰성**
테스트 코드를 작성하는 습관을 들이면 사전에 발생할 수 있는 버그를 미리 발견할 수 있다.
(특히, BFF 같은 모던 프론트엔드 개발에서는 핵심 기능의 결함을 미리 발견하는 것이 중요하다.)

**2. 높은 유지보수성**
개발을 진행하다 보면 공통으로 사용할 수 있는 모듈에 리팩토링을 실시하는데, 테스트 코드가 작성되어 있다면 구현이 끝난 기능에 문제가 생길 수 있다는 불안감을 줄일 수 있다.

**3. 코드 품질 향상**
테스트 코드는 구현 코드의 품질을 되돌아보도록 한다. 테스트 작성이 어렵다면 해당 코드가 너무 많은 역할을 한다는 신호일 수 있다. 하나의 컴포넌트가 단일 책임만 가지도록 여러 개의 컴포넌트로 분리하면 구현 코드의 책임을 파악하기 쉽고, 테스트 코드도 작성하기 쉬워진다.
또한 웹 접근성을 높이는 데에도 기여한다.

**4. 원활한 협업**
테스트 코드는 글로 작성된 문서보다 우수한 사양서다. 각 테스트에는 제목이 있어 테스트할 구현 코드가 어떤 기능을 제공하고, 어떤 방식으로 작동하는지 파악할 수 있다. 통과된 테스트는 **사양서대로 코드가 구현되어 있다고 예상 가능하다.** 이처럼 테스트 코드는 제품의 사양을 파악하는 수단으로 협업에 사용할 수 있다.

**5. 회귀 테스트 줄이기**
리팩토링할 때 회귀 테스트를 줄이고자 테스트 코드를 작성하기도 한다. 모듈이 많아지면 나눠진 모듈들을 조합하는 과정에서 모듈 간 의존관계가 생기고, 의존 중인 모듈이 변경됐을 때 미치는 영향을 검증하고자 자주 회귀 테스트를 해야 한다. 단위 테스트 및 시각적 결과물 테스트를 활용할 수 있다.

### 테스트 코드 작성 TIP

- 프로젝트에 라이브러리를 도입하는 것 처럼, 실제로 작성된 테스트 코드를 참고하는 것이 테스트 도구 학습에 효율적이다.
- 프론트엔드 테스트 코드는 라이브러리와 프레임워크의 변화가 빠르기 때문에 수명 주기가 짧지만, 미리 작성된 테스트 코드가 이후 재작성하는 구현 코드에서 문제가 생길 때 미리 알려주기 때문에 장기적으로는 효율적으로 개발 속도가 가능하였다. **(저자의 경험…)**

### 테스트와 시간 절약

**단기적인 과점**
구현 코드와 동시에 테스트 코드를 작성해야하기 때문에 많은 시간 비용이 발생한다.

**장기적인 과점**
테스트 자동화를 사용하는 경우, 제품이 커질수록 버그를 발견하고 해결하는 시간이 사용하지 않는 경우보다 줄어들 가능성이 높으며, QA팀이 수동으로 발견하여 개발자에게 이슈 티켓을 전달하고 해결하는 시간보다 더 효율적이다.

### 팀원들을 설득하는 방법

1. 릴리즈 이후에는 테스트 코드 방침을 세우기가 매우 어렵기 때문에 비교적 초기에 팀원들과 정하는 것이 좋다.
2. 테스트 코드를 무조건 작성하자고 팀원들에게 무작정 설득하기보다는, 직접 테스트 코드를 작성해보고 팀원들과 공유하는 것이 좋다. 방침에 따라 작성한 테스트 코드가 커밋되기 시작하는 것이 중요하다!
